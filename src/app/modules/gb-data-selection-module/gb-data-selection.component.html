<div class="gb-data-selection-container">
  <!-- The data selection overview panel -->
  <div class="gb-data-selection-overview-panel">
    <div class="row">
      <div class="col-3">
        <span>
          {{patientCount}} {{singularOrPlural('patient', patientCount_2)}}
        </span>
      </div>
      <div class="col-3">
        <span>
          {{observationCount}} {{singularOrPlural('observation', observationCount_2)}}
        </span>
      </div>
      <div class="col-3">
        <span>
          {{conceptCount}} {{singularOrPlural('concept', conceptCount_2)}}
        </span>
      </div>
      <div class="col-3">
        <div class="row">
          <input id="queryName" type="text"
                 class="form-control gb-data-selection-overview-panel-input"
                 placeholder="Query name"
                 (drop)="preventNodeDrop($event)"
                 [(ngModel)]="queryName" >
        </div>
        <div class="row">
          <button class="btn btn-outline-secondary btn-sm gb-data-selection-overview-panel-btn"
                  (click)="saveQuery()"
                  type="button">Save query</button>
        </div>
      </div>
    </div>
  </div>

  <p-messages [(value)]="constraintService.alertMessages"></p-messages>

  <!-- The accordions -->
  <md2-accordion [multiple]="false"
                 (open)="openAccordion($event)"
                 (close)="closeAccordion($event)">
    <!-- The 1st step -->
    <md2-accordion-tab [active]="true">
      <md2-accordion-header>
        <span class="gb-data-selection-accordion-header">Selection</span>
        <span class="gb-data-selection-accordion-sub-header">
          ({{patientCount_1}} {{singularOrPlural('patient', patientCount_1)}},
          with {{observationCount_1}} {{singularOrPlural('observation', observationCount_1)}},
          in {{conceptCount_1}} {{singularOrPlural('concept', conceptCount_1)}} and
          {{studyCount_1}} {{singularOrPlural('study', studyCount_1)}})
        </span>
      </md2-accordion-header>
      <gb-selection></gb-selection>
    </md2-accordion-tab>

    <!-- The 2nd step -->
    <md2-accordion-tab>
      <md2-accordion-header>
        <span class="gb-data-selection-accordion-header">Projection</span>
        <span class="gb-data-selection-accordion-sub-header">
          ({{patientCount_2}} {{singularOrPlural('patient', patientCount_2)}},
          with {{observationCount_2}} {{singularOrPlural('observation', observationCount_2)}},
          in {{conceptCount_2}} {{singularOrPlural('concept', conceptCount_2)}} and
          {{studyCount_2}} {{singularOrPlural('study', studyCount_2)}})
        </span>
      </md2-accordion-header>
      <gb-projection></gb-projection>
    </md2-accordion-tab>

    <md2-accordion-tab>
      <md2-accordion-header>
        <span class="gb-data-selection-accordion-header">Visualization</span>
      </md2-accordion-header>
      Visualization
    </md2-accordion-tab>

    <md2-accordion-tab>
      <md2-accordion-header>
        <span class="gb-data-selection-accordion-header">Export</span>
      </md2-accordion-header>
      <gb-export></gb-export>
    </md2-accordion-tab>

    <!--<md2-accordion-tab>-->
      <!--<md2-accordion-header>-->
        <!--<span class="gb-data-selection-accordion-header">Select Concepts</span>-->
        <!--<span class="gb-data-selection-accordion-sub-header">({{observationCount}} observations, {{conceptCount}}-->
        <!--concepts selected)</span>-->
      <!--</md2-accordion-header>-->
      <!--<observation-selection></observation-selection>-->
    <!--</md2-accordion-tab>-->


  </md2-accordion>
</div>
